include ../../common/pug/button

mixin otherImpact(index)
  .impact
    input(
      type='checkbox'
      name=`attr_impactOther${index}`
    )
    input(
      type='text'
      name=`attr_impactOther${index}_name`
      data-i18n-placeholder='impact'
      placeholder=translation['impact']
    )

mixin impactGroup(group, opts)
  if opts.title
    .impact-group-title=group.title
  .impact-list
    each impact in group.list
      - impact.classes = 'impact-btn surface-2 btn-rounded'
      +btn(impact)

// For 0.1.0
mixin impactGroupBase(group, opts)
  if opts.title
    .impact-group-title=group.label
  .impact-list
    - group.classes = 'impact-btn surface-2 btn-rounded'
    +btn(group)

mixin impacts(impactArray, opts)
  .impact-component
    each group in impactArray
      if (group.label)
        if opts.noContainer
          .impact-group
            +impactGroupBase(group, opts)
        else
          .impact-group.surface
            +impactGroupBase(group, opts)
      else
        if opts.noContainer
          .impact-group
            +impactGroup(group, opts)
        else
          .impact-group.surface
            +impactGroup(group, opts)
    input.hide-element(type='text' name='attr_impact_total' value=0)
    if opts.customImpacts
      .custom-impacts
        h4.i18n-text.other-impacts-title(data-i18n='impact-others')
        each value in [ 1, 2 ]
          +otherImpact(value)